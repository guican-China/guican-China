<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title>社区爱心码-居民</title>
    <style type="text/css">
        body{
            margin: 0;
            padding: 0;
            border: 0;
        }
        #axm{
            text-decoration: none;
        }
        #gys{
            text-decoration: none;
        }
        #jd{
            text-decoration: none;
        }
        #xq{
            text-decoration: none;
        }
        #jm{
            text-decoration: none;
        }
        #wzxx{
            text-decoration: none;
        }
        #yhfk{
            text-decoration: none;
        }
        #wzxx:hover{
            background-color: gray;
        }
        #yhfk:hover{
            background-color: gray;
        }
    </style>
</head>
<body>
<div id="daohanglan" style="background-color: black;font-family: 'MiSans',sans-serif">
    <a href="Shouye.html" style="color: white;font-weight: bolder" id="axm">爱心码</a>
    <a href="Gongyingshang.html" style="color: white" id="gys">供应商</a>
    <a href="XiaoquForJiedao.html" style="color: white" id="jd">街道</a>
    <a href="Xiaoqu.html" style="color: white" id="xq">小区</a>
    <a href="Jumin.html" style="color: white" id="jm">居民</a>
</div>
<table>
    <tr>
        <!-- menu -->
        <td style="background-color: gainsboro;width: 100px;margin: 0;height: 92VH;vertical-align: top;text-align: center;font-family: 'MiSans',sans-serif">
            <li style="list-style-type: none"><a href="Jumin.html" style="color: black;font-size: 18px;display: block" id="wzxx">食品信息</a></li>
            <li style="list-style-type: none"><a href="Fankui.html" style="color: black;font-size: 18px;display: block" id="yhfk">用户反馈</a></li>
        </td>
        <!-- content -->
        <td id="content-td" style="vertical-align: top">

            <h2 id="title" style="text-align: center;font-family: 'MiSans Heavy',sans-serif">
                食品列表
            </h2>

            <table rules="rows" cellpadding="20px" style="text-align: center;font-family: 'MiSans',sans-serif" id="t1">
                <tr style="background-color: gainsboro">
                    <th>ID</th>
                    <th>种类</th>
                    <th>数量</th>
                    <th>生产日期</th>
                    <th>保质期</th>
                    <th>供应商</th>
                    <th>物资包ID</th>
                </tr>
                <tr><td>1</td><td>带鱼段 500克</td><td>1000</td><td>2022/5/22 8:00</td><td>60天</td><td>粮食局</td><td>10</td></tr>
                <tr><td>2</td><td>冻鸡腿 700克</td><td>1000</td><td>2022/5/22 8:00</td><td>60天</td><td>粮食局</td><td>10</td></tr>
                <tr><td>3</td><td>土豆 300克</td><td>1000</td><td>2022/5/22 8:00</td><td>14天</td><td>粮食局</td><td>10</td></tr>
                <tr><td>4</td><td>金针菇 2包</td><td>1000</td><td>2022/5/22 8:00</td><td>14天</td><td>粮食局</td><td>10</td></tr>
                <tr><td>5</td><td>胡萝卜 2根</td><td>1000</td><td>2022/5/22 8:00</td><td>14天</td><td>粮食局</td><td>10</td></tr>
                <tr><td>6</td><td>干挂面 1000克</td><td>1000</td><td>2022/4/1 9:00</td><td>180天</td><td>粮食局</td><td>10</td></tr>
            </table>
        </td>
    </tr>
</table>

<p style="text-align: center;background-color: cornsilk;margin: 0">版权© xxx</p>

<script>
    setTimeout(load(), 100);
    function load() {
        const request = new XMLHttpRequest();

        request.onreadystatechange = function () {
            if(request.readyState === 4) {
                // 表示完成相应

                if (request.status === 200) {
                    // 成功，通过responseText拿到响应的文本:
                    return success(request.responseText);
                }else {
                    // 失败，根据响应码判断失败原因:
                    return fail(request.status);
                }
            }
        }

        // 发送请求:
        request.open('GET', 'http://101.35.140.248:8080/demo-web/jm?id=1');
        request.send();
    }

    function success(txt) {
        console.log(txt)
        parseList(txt);
    }

    function parseList(list) {
        let html = '';
        let jsonList = JSON.parse(list);
        for (let i=0;i<jsonList.length;i++){
            let json =  jsonList[i];
            // du(json);

                html = html +
                    "<tr>" +
                    "<td>" + json.种类 + "</td>" +
                    "<td>" + json.数量 + "</td>" +
                    "<td>" + json.生产日期 + "</td>" +
                    "<td>" + json.保质期 + "</td>" +
                    "<td>" + json.供应商 + "</td>" +
                    "</tr>";
            }

        document.getElementById("kebianqu-body").innerHTML = html;
    }

            function fail(status) {
                console.log(status)
    }

</script>
</body>
</html>